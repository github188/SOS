## SangforTool使用

### **作用：**

1. 实现模拟多分支并发接入总部，更真实更方便，易于人工控制，更能方便测试结果检查

### **工具原理：**

1. 基于现有lmdlan服务开发的，配置操作与分支配置一样，无任何区别，后台服务程序也是lmdlan
2. 启停方式为/etc/init.d/lmdlan start or stop
3. lmdlan配置路径：/etc/sinfor/dlan/
4. N多分支与总部数据互访是基于lmdlan原本功能-&gt;隧道间路由实现

### 使用方法：

* #### 工具辅助脚本：

  ```
  脚本说明：tool_vpn_gen.sh sangfor 命令后，能根据脚本提示引导配置步骤，以更简单的方式去执行，无需知道每个参数是干什么
  脚本参数说明:
  tool_vpn_gen.sh参数说明:
  测试设备的总部的webagent配置:   ------------------>测试总部的基本设置
  被测试设备上用户管理的用户名：   ------------------>
  被测试设备上用户的密码：     
  工具端的内网网段（如网段2.2.2.0）：
  工具段的内网网段掩码（如掩码：255.255.255.0）：
  测试工具标记（参考ABCDEFG）：
  测试工具标记起始位置(直接输入1)；
  本段的vpn虚拟ip(如：12.12.12.1)：
  VPN传输模式(0:TCP;1:UDP)：
  VPN传输模式封堵模式(0->不启用,1->自动,2->TCP,3->ESP,默认不启用)：
  VPN启用多用户(1是不启用,0是启用,建议选择1)：
  被测试设备总部内网网段（如：111.111.111.0）：
  被测试设备总部内网网段掩码（如：255.255.255.0）：
  VPN用户认证方式(0:非证书认证,1:证书认证)：
  本地证书ID(根据工具环境证书配置id)：
  对端根证ID(根据工具环境证书配置id)：
  ```
* #### 举例说明:

  ```
  需求：并发1000个分支接入,用户为AES,密码test123

  详细步骤：
   1、总部导入1000用户为AES1....AES1000且密码为test123配置
   2、测试工具执行tool_vpn_gen.sh sangfor 命令窗口提示输入每个参数信息，在输入总部用户的时候应该输入AES，
   3、在后台日志/var/SangforTool.log 查看配置输出的命令后，复制后在输入到控制台上
  ```

```
 
```



